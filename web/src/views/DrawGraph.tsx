import React, { Component } from 'react';


class DrawGraph extends Component {
  canvas = null;
  ctx = null;

  handleChangeField = (e) => {
    try {
      const value = JSON.parse('[[[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.1764705926179886], [0.5529412031173706], [0.5529412031173706], [1.0], [0.6980392336845398], [0.1725490242242813], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.07450980693101883], [0.8823529481887817], [0.9882352948188782], [0.9882352948188782], [0.9921568632125854], [0.9882352948188782], [0.8784313797950745], [0.46666666865348816], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.30980393290519714], [0.9882352948188782], [0.8784313797950745], [0.658823549747467], [0.658823549747467], [0.8784313797950745], [0.9882352948188782], [0.9882352948188782], [0.14901961386203766], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.30980393290519714], [0.7921568751335144], [0.07450980693101883], [0.0], [0.0], [0.3686274588108063], [0.8941176533699036], [0.9882352948188782], [0.6392157077789307], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.062745101749897], [0.08627451211214066], [0.0], [0.0], [0.0], [0.0], [0.5764706134796143], [0.9921568632125854], [0.9372549057006836], [0.14901961386203766], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.45490196347236633], [0.9176470637321472], [0.3450980484485626], [0.0], [0.0], [0.0], [0.5764706134796143], [0.9882352948188782], [0.8352941274642944], [0.14901961386203766], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.7960784435272217], [0.9882352948188782], [0.7098039388656616], [0.05098039284348488], [0.0], [0.2235294133424759], [0.843137264251709], [0.9882352948188782], [0.6392157077789307], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.40392157435417175], [0.9882352948188782], [0.9529411792755127], [0.29411765933036804], [0.05098039284348488], [0.8078431487083435], [0.9882352948188782], [0.7921568751335144], [0.24705882370471954], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.2980392277240753], [0.95686274766922], [0.9921568632125854], [0.9921568632125854], [0.800000011920929], [0.9921568632125854], [0.95686274766922], [0.4901960790157318], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.05098039284348488], [0.8078431487083435], [0.9882352948188782], [0.9882352948188782], [0.9921568632125854], [0.9882352948188782], [0.364705890417099], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.14901961386203766], [0.5764706134796143], [0.9176470637321472], [0.9882352948188782], [0.9882352948188782], [0.9058823585510254], [0.21960784494876862], [0.05098039284348488], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.4941176474094391], [0.929411768913269], [0.9921568632125854], [0.9882352948188782], [0.9882352948188782], [0.7921568751335144], [0.09803921729326248], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.05098039284348488], [0.21176470816135406], [0.9921568632125854], [0.9921568632125854], [0.9921568632125854], [0.9960784316062927], [0.9921568632125854], [0.9921568632125854], [0.30588236451148987], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.07450980693101883], [0.5647059082984924], [0.9921568632125854], [0.9882352948188782], [0.8156862854957581], [0.5686274766921997], [0.501960813999176], [0.9882352948188782], [0.9882352948188782], [0.30588236451148987], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.48235294222831726], [0.9882352948188782], [0.95686274766922], [0.658823549747467], [0.14509804546833038], [0.0], [0.501960813999176], [0.9882352948188782], [0.729411780834198], [0.07450980693101883], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.5764706134796143], [0.9882352948188782], [0.686274528503418], [0.0], [0.0], [0.20000000298023224], [0.7960784435272217], [0.9882352948188782], [0.4156862795352936], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.529411792755127], [0.9921568632125854], [0.7019608020782471], [0.03921568766236305], [0.0], [0.4941176474094391], [0.9960784316062927], [0.9921568632125854], [0.4156862795352936], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.4588235318660736], [0.9647058844566345], [0.9921568632125854], [0.47843137383461], [0.5647059082984924], [0.9529411792755127], [0.9921568632125854], [0.8392156958580017], [0.07450980693101883], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.14901961386203766], [0.7803921699523926], [0.9921568632125854], [0.9882352948188782], [0.9882352948188782], [0.9882352948188782], [0.9058823585510254], [0.16862745583057404], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.24705882370471954], [0.6000000238418579], [0.9882352948188782], [0.8392156958580017], [0.3529411852359772], [0.09803921729326248], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]], [[0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]]]'
      );
      // init
      this.ctx = this.canvas.getContext('2d');
      // canvas configs
      this.ctx.fillStyle = 'white'; // 背景颜色
      this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
      this.ctx.strokeStyle = 'black'; // 画笔颜色
      this.ctx.lineWidth = 1; // 线条宽度
      for (let i = 0; i < this.canvas.width; i++) {
        for (let j = 0; j < this.canvas.height; j++) {
          this.ctx.fillStyle = `rgba(0,0,0,${value[j][i]})`; // 背景颜色
          // console.log(this.ctx.fillStyle, value[i][j]);
          this.ctx.fillRect(i, j, 1, 1);
        }
      }
    } catch (e) {
      return console.error('Draw fail.', e);
    }
  };

  render() {
    return (
      <div id="app">
        <textarea
          cols="10"
          rows="10"
          style={{ marginBottom: 20, resize: 'none' }}
          onChange={this.handleChangeField}
        />
        <div className="canvas-container">
          <canvas
            ref={ref => this.canvas = ref}
            width={28}
            height={28}
          />
        </div>
      </div>
    );
  }
}

export default DrawGraph;